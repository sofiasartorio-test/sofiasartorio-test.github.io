{{ define "main" }}
<h1 style="text-align:center; margin-bottom:2rem;">ðŸ‘¥ Our Team</h1>

{{/* Prima raccogli tutti i ruoli */}}
{{ $ruoli := slice }}
{{ range (where site.RegularPages "Section" "authors") }}
  {{ if .Params.role }}
    {{ if not (in $ruoli .Params.role) }}
      {{ $ruoli = $ruoli | append .Params.role }}
    {{ end }}
  {{ end }}
{{ end }}

{{/* Per ogni ruolo crea una sezione */}}
{{ range $ruolo := $ruoli }}
  <h2 style="text-align:center; margin-top:2rem;">{{ $ruolo }}</h2>
  <div class="people-grid">
    {{ range (where site.RegularPages "Section" "authors") }}
      {{ if eq .Params.role $ruolo }}
        <div class="person-card">
          {{ $avatar := .Params.avatar | default "/images/default-avatar.png" }}
          <img class="avatar" src="{{ $avatar }}" alt="{{ .Title }}">
          <h3>{{ .Title }}</h3>
          <div class="socials">
            {{ with .Params.social }}
              {{ if .email }}<a href="mailto:{{ .email }}">Email</a>{{ end }}
              {{ if .scholar }} | <a href="{{ .scholar }}">Google Scholar</a>{{ end }}
              {{ if .linkedin }} <a href="{{ .linkedin }}" target="_blank" title="LinkedIn"> <img src="/images/icons/linkedin.svg" alt="LinkedIn" class="social-icon"></a>{{ end }}
            {{ end }}
          </div>
        </div>
      {{ end }}
    {{ end }}
  </div>
{{ end }}

<style>
.people-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 2rem; justify-items: center; margin-top: 1rem; }
.person-card { text-align: center; padding: 1rem; border: 1px solid #eee; border-radius: 8px; }
.avatar { width: 150px; height: 150px; object-fit: cover; border-radius: 50%; }
.role { font-size: 0.9rem; color: #555; }
.socials a { margin: 0 0.5rem; font-size: 0.9rem; color: #007acc; text-decoration: none; }
h2 { color: #222; border-bottom: 1px solid #ccc; padding-bottom: 0.3rem; }
</style>
{{ end }}



