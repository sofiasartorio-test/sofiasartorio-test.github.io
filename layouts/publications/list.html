{{ define "main" }}

<h1 class="page-title">ðŸ“š Publications</h1>
<style>
.page-title {
  text-align: center;
  margin-bottom: 2rem;
  font-size: 3rem;
  font-weight: 700;
}
</style>

<!-- SEARCH BAR -->
<div style="max-width:600px; margin:0 auto 2rem auto;">
  <input
    type="text"
    id="searchInput"
    placeholder="Search by title, author, topic, year..."
    style="
      width:100%;
      padding:0.7rem 1rem;
      font-size:1rem;
      border:1px solid #ccc;
      border-radius:999px;
      outline:none;
    "
  >
</div>

<!-- PUBLICATIONS LIST -->
<div class="pub-list">
  {{ range sort .Pages "Params.year" "desc" }}
    <div class="pub-item"
         data-search="{{ lower (printf "%s %s %v %v" .Title (delimit .Params.authors " ") .Params.topics .Params.year) }}">

      <!-- TITOLO -->
      <a href="{{ .RelPermalink }}" class="pub-title">
        {{ .Title }}
      </a>

      <!-- META -->
      <div class="pub-meta">

        {{/* AUTORI CLICCABILI */}}
        {{ $authors := .Params.authors }}
        {{ if reflect.IsSlice $authors }}
          {{ range $i, $author := $authors }}
            {{ if gt $i 0 }}, {{ end }}
            {{ $slug := urlize $author }}
            {{ with site.GetPage (printf "/authors/%s" $slug) }}
              <a href="{{ .RelPermalink }}">{{ $author }}</a>
            {{ else }}
              {{ $author }}
            {{ end }}
          {{ end }}
        {{ else }}
          {{ $authors }}
        {{ end }}

        ({{ .Params.year }})

        {{ with .Params.pdf }}
          â€“ <a href="{{ . }}" target="_blank">PDF</a>
        {{ end }}

        {{ with .Resources.GetMatch "cite.bib" }}
          â€“ <a href="{{ .RelPermalink }}" target="_blank">BibTeX</a>
        {{ end }}

      </div>
    </div>
  {{ end }}
</div>

<!-- STYLE -->
<style>
.pub-list {
  max-width: 800px;
  margin: auto;
}

.pub-item {
  padding: 0.6rem 0;
  border-bottom: 1px solid #e5e5e5;
}

.pub-title {
  font-weight: 500;
  color: #0066cc;
  text-decoration: none;
}

.pub-title:hover {
  text-decoration: underline;
}

.pub-meta {
  font-size: 0.9rem;
  color: #555;
}

.pub-meta a {
  color: #0066cc;
  text-decoration: none;
}

.pub-meta a:hover {
  text-decoration: underline;
}
</style>

<!-- SEARCH SCRIPT -->
<script>
const input = document.getElementById('searchInput');
const items = document.querySelectorAll('.pub-item');

input.addEventListener('input', () => {
  const query = input.value.toLowerCase();

  items.forEach(item => {
    const text = item.dataset.search;
    item.style.display = text.includes(query) ? 'block' : 'none';
  });
});
</script>

{{ end }}










