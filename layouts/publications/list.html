{{ define "main" }}
<h1 style="text-align:center; margin-bottom:2rem;">ğŸ“š Publications</h1>

<div style="text-align:center; margin-bottom:1rem;">
  <label for="yearFilter">Filter by year:</label>
  <select id="yearFilter">
    <option value="">All</option>

    {{ $years := slice }}
    {{ range .Pages }}
      {{ with .Params.year }}
        {{ if not (in $years .) }}
          {{ $years = $years | append . }}
        {{ end }}
      {{ end }}
    {{ end }}

    {{ range sort $years }}
      <option value="{{ . }}">{{ . }}</option>
    {{ end }}
  </select>
</div>

<div id="pubList" class="max-w-3xl mx-auto flex flex-col gap-4 px-4">
  {{ range sort .Pages "Params.year" "desc" }}
    <div class="publication-item flex flex-col sm:flex-row sm:items-center sm:justify-between border-b border-gray-200 pb-2"
         data-year="{{ .Params.year }}">

      <a href="{{ .RelPermalink }}" class="text-blue-600 hover:underline font-medium">
        {{ .Title }}
      </a>

      <div class="text-gray-600 text-sm mt-1 sm:mt-0">
        {{ with .Params.authors }}{{ . }}{{ end }}
        {{ with .Params.year }} ({{ . }}){{ end }}
        {{ with .Params.pdf }}
          â€“ <a href="{{ . }}" class="text-blue-500 hover:underline" target="_blank">PDF</a>
        {{ end }}
      </div>

    </div>
  {{ end }}
</div>

<script>
document.getElementById('yearFilter').addEventListener('change', function () {
  const year = this.value;
  document.querySelectorAll('.publication-item').forEach(item => {
    item.style.display = (!year || item.dataset.year === year) ? 'flex' : 'none';
  });
});
</script>
{{ end }}








